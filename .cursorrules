# Clinikoop - Vercel Production Deployment Rules

## ğŸš€ Proje YapÄ±sÄ±
Clinikoop, diÅŸ kliniklerinin hasta teklif sÃ¼reÃ§lerini yÃ¶netmesine odaklanan, link tabanlÄ± hasta eriÅŸimi sunan, PDF Ã¼retimi destekleyen tek-klinik yapÄ±lÄ± bir SaaS platformudur.

## ğŸ—„ï¸ Database Stratejisi
- **Local Development**: PostgreSQL (Docker veya local PostgreSQL)
- **Production (Vercel)**: PostgreSQL (Prisma Data Platform)
- **ASLA SQLite kullanma** - Sadece PostgreSQL kullan

## ğŸ”§ Teknoloji Stack
- **Framework**: Next.js 14 App Router with TypeScript
- **Styling**: Tailwind CSS
- **Database**: PostgreSQL + Prisma ORM
- **Authentication**: NextAuth.js
- **Deployment**: Vercel
- **PDF Generation**: html2pdf.js / react-pdf

## ğŸ“ Dosya Organizasyonu
```
src/
â”œâ”€â”€ app/           # Next.js App Router pages
â”œâ”€â”€ components/    # Reusable UI components
â”œâ”€â”€ lib/          # Utilities, database, auth
â”œâ”€â”€ hooks/        # Custom React hooks
â”œâ”€â”€ types/        # TypeScript type definitions
â””â”€â”€ contexts/     # React contexts
```

## ğŸ¨ UI/UX Prensipleri
- **Responsive Design**: Mobile-first, tÃ¼m ekran boyutlarÄ± iÃ§in optimize
- **Modern UI**: Rounded corners, soft shadows, clean whitespace
- **Accessibility**: WCAG standartlarÄ±na uygun
- **Performance**: Lazy loading, image optimization

## ğŸ” Authentication & Authorization
- **Patient Access**: Tokenized links, no login required
- **Admin/Sales**: Full NextAuth.js login system
- **Role-based Access**: SUPER_ADMIN, ADMIN, USER
- **Multi-tenant**: Clinic-based isolation

## ğŸ“Š Database Models (Prisma)
```prisma
// Ana modeller
- Clinic (Multi-tenant ana model)
- ClinicUser (Klinik kullanÄ±cÄ±larÄ±)
- Patient (Hastalar)
- Offer (Teklifler)
- Treatment (Tedaviler)
- Reminder (HatÄ±rlatmalar)
- SupportTicket (Destek talepleri)
```

## ğŸš€ Vercel Deployment Rules

### Environment Variables (ZORUNLU)
```env
# Database (PostgreSQL - Prisma Data Platform)
DATABASE_URL="postgres://..."

# Authentication
NEXTAUTH_URL="https://your-domain.vercel.app"
NEXTAUTH_SECRET="your-secret-key"

# Production Settings
NODE_ENV="production"
```

### Build Configuration
- **Build Command**: `npm run build` (Prisma generate otomatik)
- **Output**: Standalone mode
- **Regions**: iad1 (US East)
- **Functions**: 30s max duration

### Database Migration
```bash
# Production migration
npx prisma migrate deploy
npx prisma db seed
```

## ğŸ“‹ Development Rules

### Component Creation
- **Functional Components**: Arrow functions kullan
- **PascalCase**: Component isimleri
- **TypeScript**: Strict mode, proper typing
- **Props Interface**: Her component iÃ§in interface tanÄ±mla

### API Routes
- **Location**: `src/app/api/`
- **Response Format**: JSON
- **Error Handling**: Try-catch, proper HTTP status codes
- **Validation**: Zod schema validation

### Database Operations
- **Prisma Client**: Singleton pattern
- **Transactions**: Complex operations iÃ§in
- **Error Handling**: Proper error messages
- **Soft Delete**: Where applicable

## ğŸ”’ Security Rules
- **Environment Variables**: Never commit to git
- **HTTPS Only**: Production'da zorunlu
- **Input Validation**: All user inputs
- **SQL Injection**: Prisma ORM kullan (raw SQL yok)
- **XSS Protection**: Sanitize user inputs

## ğŸ“ˆ Performance Rules
- **Image Optimization**: Next.js Image component
- **Code Splitting**: Dynamic imports
- **Caching**: API responses, static assets
- **Bundle Size**: Monitor and optimize

## ğŸ§ª Testing Rules
- **Unit Tests**: Critical business logic
- **Integration Tests**: API endpoints
- **E2E Tests**: Critical user flows
- **Error Monitoring**: Vercel Analytics

## ğŸ“ Code Quality Rules
- **ESLint**: Strict configuration
- **Prettier**: Consistent formatting
- **TypeScript**: Strict mode
- **Comments**: English only
- **Git Commits**: Conventional commits

## ğŸš« YasaklÄ± Ä°ÅŸlemler
- âŒ SQLite kullanÄ±mÄ± (sadece PostgreSQL)
- âŒ Raw SQL queries (Prisma ORM kullan)
- âŒ Client-side database operations
- âŒ Hardcoded secrets
- âŒ Console.log in production
- âŒ Inline styles (Tailwind kullan)

## âœ… Zorunlu Ä°ÅŸlemler
- âœ… Environment variables validation
- âœ… Error boundaries
- âœ… Loading states
- âœ… Proper TypeScript types
- âœ… Responsive design
- âœ… Accessibility attributes
- âœ… SEO meta tags

## ğŸ”„ Deployment Checklist
- [ ] Environment variables set
- [ ] Database migration completed
- [ ] Seed data loaded
- [ ] Build successful
- [ ] All tests passing
- [ ] Performance optimized
- [ ] Security headers set
- [ ] Monitoring configured

## ğŸ“ Emergency Procedures
1. **Database Issues**: Check Prisma Data Platform
2. **Build Failures**: Check environment variables
3. **Performance Issues**: Check Vercel Analytics
4. **Security Issues**: Rotate secrets immediately

---

**Bu kurallar, projenin Vercel'de sorunsuz Ã§alÄ±ÅŸmasÄ± ve maintainable kod yazÄ±lmasÄ± iÃ§in tasarlanmÄ±ÅŸtÄ±r.**
